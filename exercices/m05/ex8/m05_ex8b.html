<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>M05 : ex 8</title>
        <script>

            "use strict";

            //déclaration des variables globales

            let name1 = prompt('Ecrivez le prénom du joueur n°1')
            let name2 = prompt('Ecrivez le prénom du joueur n°2')
            let points1 = 0;
            let points2 = 0;


            //déclaration des fonctions

            // random number gen (inclusive)
            function random(n1, n2) {
                let range = n2-n1+1;
                return n1+Math.floor(Math.random()*range);
            }

            // generate card name
            function cardName(c, cc) {
                let name = `${c} de `;

                switch (cc) {
                    case 1:
                        name += 'carreau';
                        break;
                    case 2:
                        name += 'trèfle';
                        break;
                    case 3:
                        name += 'pic';
                        break;
                    case 4:
                        name += 'coeur';
                        break;
                }

                return name
            }

            // calculate winner
            function getWinner(c1, cc1, c2, cc2) {
                if ((c1>c2)||((c1==c2)&&cc1>cc2)) {
                    points1 += 1;
                    return 1;
                } else if ((c1<c2)||((c1==c2)&&cc1<cc2)) {
                    points2 += 1;
                    return 2;
                } else {
                    points1 += 1;
                    points2 += 1;
                    return 0;
                }
            }

            // make winning message
            function whoWon(t, c1, cc1, c2, cc2) {
                switch (getWinner(c1, cc1, c2, cc2)) {
                    case 0:
                        return `Les deux joueurs ont gagné le tour n°${t}`
                        break;
                    case 1:
                        return `${name1} a gagné le tour n°${t}`
                        break;
                    case 2:
                        return `${name2} a gagné le tour n°${t}`
                        break;
                }
            }

            // one turn
            function playTurn(t) {
                let card1 = random(6,14);
                    let cardCol1 = random(1,4);

                    let card2 = random(6,14);
                    let cardCol2 = random(1,4);

                    alert(`tour n°${t}\n${name1} a obtenu le ${cardName(card1,cardCol1)}.\n${name2} a obtenu le ${cardName(card2,cardCol2)}.`);

                    alert(whoWon(t, card1, cardCol1, card2, cardCol2));
            }

            // final statement
            function finalStatement() {
                let txt = '';
                if (points1>points2) {
                    txt = `${name1} a gagné la partie!`;
                } else if (points1<points2) {
                    txt = `${name2} a gagné la partie!`;
                } else {
                    txt = 'Les deux joueurs ont gagné la partie!';
                }
                alert(txt);
            }


            
            //Programme principal

            function jouerPartie() {
                //appel des fonctions

                for (let turn=1 ; turn<=3 ; turn++) {
                    playTurn(turn);
                }

                finalStatement();

            }

            //lancer le programme principal
            jouerPartie();

        </script>
      </head>
      <body>

      </body>
</html>
